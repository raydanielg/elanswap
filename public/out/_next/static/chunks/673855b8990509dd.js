(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,9426,e=>{"use strict";e.s(["default",()=>s]);var t=e.i(14294),i=e.i(30878);function s(){let[e,s]=(0,i.useState)([]),[a,l]=(0,i.useState)(!0),[n,r]=(0,i.useState)(!1),[d,o]=(0,i.useState)(null),[c,h]=(0,i.useState)([]),[x,u]=(0,i.useState)(!1),[m,b]=(0,i.useState)(null),[w,p]=(0,i.useState)(null),[g,v]=(0,i.useState)({});(0,i.useEffect)(()=>{let e=!0;return fetch("https://www.swap.elanbrands.net/api/regions").then(e=>e.json()).then(t=>{var i;e&&s(null!=(i=null==t?void 0:t.data)?i:[])}).catch(()=>s([])).finally(()=>e&&l(!1)),()=>{e=!1}},[]);let j=async e=>{o(e),r(!0),u(!0),b(null),h([]);try{var t;let i=await fetch("https://www.swap.elanbrands.net/api/regions/".concat(e.id,"/stations-with-apps"));if(!i.ok)throw Error("HTTP ".concat(i.status));let s=await i.json();h(null!=(t=null==s?void 0:s.data)?t:[])}catch(e){b((null==e?void 0:e.message)||"Failed to load stations")}finally{u(!1)}};return(0,i.useEffect)(()=>{let e=e=>{"Escape"===e.key&&r(!1)};return n&&document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[n]),(0,t.jsxs)("section",{className:"relative overflow-hidden py-16 lg:py-24 page-dark-bg min-h-[60vh]",children:[(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,t.jsx)("div",{className:"flex items-end justify-between gap-4",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl sm:text-4xl font-extrabold tracking-tight text-white drop-shadow",children:"Mikoa Yote"}),(0,t.jsx)("p",{className:"mt-2 text-white/90",children:"Vinjari mikoa yote pamoja na idadi ya vituo na wilaya."})]})}),a?(0,t.jsx)("div",{className:"mt-10 grid sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:Array.from({length:8}).map((e,i)=>(0,t.jsxs)("div",{className:"rounded-2xl border border-white/15 bg-white/5 backdrop-blur p-6 animate-pulse",children:[(0,t.jsx)("div",{className:"h-10 w-10 rounded bg-white/20 mb-4"}),(0,t.jsx)("div",{className:"h-4 w-2/3 bg-white/20 rounded"}),(0,t.jsx)("div",{className:"h-3 w-1/3 bg-white/10 rounded mt-2"})]},i))}):(0,t.jsx)("div",{className:"mt-10 grid sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:e.map(e=>(0,t.jsx)("button",{id:e.slug,type:"button",onClick:()=>j(e),"aria-label":"Fungua wilaya za ".concat(e.name),className:"group rounded-2xl border border-white/15 bg-white/5 hover:bg-white/10 backdrop-blur p-6 shadow transition text-left focus:outline-none focus-visible:ring-2 focus-visible:ring-[var(--color-secondary)]/50",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("span",{className:"inline-flex h-12 w-12 items-center justify-center rounded-xl bg-gradient-to-br from-[var(--color-primary)]/25 to-[var(--color-secondary)]/25 text-white shadow",children:(0,t.jsx)("svg",{viewBox:"0 0 24 24",className:"h-6 w-6",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,t.jsx)("path",{d:"M3 11h18M3 7h18M3 15h18"})})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-semibold text-white",children:e.name}),(0,t.jsxs)("div",{className:"text-sm text-white/75",children:[e.districts_count," wilaya"]})]})]})},e.id))})]}),n&&d&&(0,t.jsxs)("div",{className:"fixed inset-0 z-50",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-black/60",onClick:()=>r(!1)}),(0,t.jsx)("div",{className:"absolute inset-0 flex items-center justify-center p-4",children:(0,t.jsxs)("div",{className:"w-full max-w-3xl rounded-xl sm:rounded-2xl border border-white/15 bg-white/10 backdrop-blur shadow-xl max-h-[85vh] overflow-y-auto",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 sm:p-5 border-b border-white/10",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-white",children:d.name}),(0,t.jsx)("p",{className:"text-sm text-white/80",children:"Vituo vyenye maombi"})]}),(0,t.jsx)("button",{onClick:()=>r(!1),"aria-label":"Funga",className:"inline-flex h-9 w-9 items-center justify-center rounded-full border border-white/15 bg-white/10 text-white hover:bg-white/20",children:(0,t.jsxs)("svg",{viewBox:"0 0 24 24",className:"h-4 w-4",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,t.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,t.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),(0,t.jsx)("div",{className:"p-4 sm:p-5",children:x?(0,t.jsx)("div",{className:"rounded-lg border border-white/10 bg-white/5 p-4 text-white/85",children:"Inapakia vituo..."}):m?(0,t.jsxs)("div",{className:"rounded-lg border border-red-400/30 bg-red-500/10 p-4 text-red-200 text-sm",children:["Imeshindikana kupakia vituo. ",(0,t.jsx)("button",{onClick:()=>d&&j(d),className:"underline",children:"Jaribu tena"})]}):0===c.length?(0,t.jsx)("div",{className:"rounded-lg border border-white/10 bg-white/5 p-4 text-white/75",children:"Hakuna vituo vyenye maombi."}):(0,t.jsx)("ul",{className:"grid gap-3",children:c.map(e=>{let i=g[e.id]||{loading:!1,error:null,data:[]},s=w===e.id,a=async()=>{let t=s?null:e.id;if(p(t),t&&!i.data.length&&!i.loading){v(t=>({...t,[e.id]:{loading:!0,error:null,data:[]}}));try{let t=await fetch("https://www.swap.elanbrands.net/api/stations/".concat(e.id,"/applications"));if(!t.ok)throw Error("HTTP ".concat(t.status));let i=await t.json();v(t=>{var s;return{...t,[e.id]:{loading:!1,error:null,data:null!=(s=null==i?void 0:i.data)?s:[]}}})}catch(t){v(i=>({...i,[e.id]:{loading:!1,error:(null==t?void 0:t.message)||"Failed to load applications",data:[]}}))}}};return(0,t.jsxs)("li",{className:"rounded-lg border border-white/10 bg-white/5",children:[(0,t.jsxs)("button",{type:"button",onClick:a,className:"w-full p-3 text-left flex items-center justify-between gap-3 focus:outline-none focus-visible:ring-2 focus-visible:ring-[var(--color-secondary)]/50",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-white font-medium",children:e.name}),(0,t.jsx)("div",{className:"text-xs text-white/75",children:e.district})]}),(0,t.jsxs)("span",{className:"inline-flex items-center gap-1 rounded-full border border-white/15 bg-white/10 px-2 py-0.5 text-xs font-medium text-white/85",children:[e.applications_count," maombi"]})]}),(0,t.jsx)("div",{className:"".concat(s?"block":"hidden"," border-t border-white/10 p-3 pt-2"),children:i.loading?(0,t.jsx)("div",{className:"text-white/85 text-sm",children:"Inapakia maombi..."}):i.error?(0,t.jsxs)("div",{className:"text-red-200 text-sm",children:["Imeshindikana kupakia. ",(0,t.jsx)("button",{onClick:a,className:"underline",children:"Jaribu tena"})]}):0===i.data.length?(0,t.jsx)("div",{className:"text-white/75 text-sm",children:"Hakuna maombi."}):(0,t.jsx)("ul",{className:"space-y-2",children:i.data.map(e=>(0,t.jsxs)("li",{className:"rounded-md border border-white/10 bg-white/5 px-3 py-2 flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-white text-sm font-medium",children:e.code}),(0,t.jsx)("div",{className:"text-white/70 text-xs",children:e.submitted_at?new Date(e.submitted_at).toLocaleString():"â€”"})]}),(0,t.jsx)("span",{className:"ml-3 inline-flex items-center gap-1 rounded-full border border-white/15 bg-white/10 px-2 py-0.5 text-xs font-medium text-white/85",children:e.status})]},e.id))})})]},e.id)})})})]})})]})]})}}]);